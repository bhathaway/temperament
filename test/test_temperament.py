from temperament import *
import pytest as pt

def test_equal_temperament():
    t = Temperament([0.0 for i in range(12)])
    eps = 0.001
    assert t.getFrequency('Cb1') == pt.approx(30.868, eps)
    assert t.getFrequency('Cbb1') == pt.approx(29.135, eps)
    assert t.getFrequency('B#1') == pt.approx(65.406, eps)
    assert t.getFrequency('C0') == pt.approx(16.352, eps)
    assert t.getFrequency('C8') == pt.approx(4186.009, eps)
    assert t.getFrequency('Db3') == pt.approx(138.591, eps)
    assert t.getFrequency('C#7') == pt.approx(2217.461, eps)
    assert t.getFrequency('D1') == pt.approx(36.708, eps)
    assert t.getFrequency('C##2') == pt.approx(73.416, eps)
    assert t.getFrequency('Eb4') == pt.approx(311.127, eps)
    assert t.getFrequency('D#5') == pt.approx(622.254, eps)
    assert t.getFrequency('E5') == pt.approx(659.255, eps)
    assert t.getFrequency('Fb2') == pt.approx(82.407, eps)
    assert t.getFrequency('Gb6') == pt.approx(1479.978, eps)
    assert t.getFrequency('F#3') == pt.approx(184.997, eps)
    assert t.getFrequency('G7') == pt.approx(3135.963, eps)
    assert t.getFrequency('F##2') == pt.approx(97.999, eps)
    assert t.getFrequency('Abb1') == pt.approx(48.999, eps)
    assert t.getFrequency('Ab4') == pt.approx(415.305, eps)
    assert t.getFrequency('G#5') == pt.approx(830.609, eps)
    assert t.getFrequency('A4') == pt.approx(440.000, eps)
    assert t.getFrequency('G##0') == pt.approx(27.500, eps)
    assert t.getFrequency('Bbb5') == pt.approx(880.000, eps)
    assert t.getFrequency('Bb3') == pt.approx(233.082, eps)
    assert t.getFrequency('A#6') == pt.approx(1864.655, eps)
    assert t.getFrequency('B7') == pt.approx(3951.066, eps)
    assert t.getFrequency('A##2') == pt.approx(123.471, eps)
    assert t.getFrequency('Cb5') == pt.approx(493.883, eps)

def test_bryce_temperament():
    v = [5.5, 3.0, 2.75, 7.0, -0.5, 6.0, 1.25, 5.5, 2.5, 0.0, 5.75, 2.5]
    t = Temperament(v)
    eps = 0.001
    assert t.getFrequency('C2') == pt.approx(65.615, eps)
    assert t.getFrequency('C#2') == pt.approx(69.416, eps)
    assert t.getFrequency('D2') == pt.approx(73.533, eps)
    assert t.getFrequency('Eb2') == pt.approx(78.097, eps)
    assert t.getFrequency('E2') == pt.approx(82.383, eps)
    assert t.getFrequency('F2') == pt.approx(87.610, eps)
    assert t.getFrequency('F#2') == pt.approx(92.565, eps)
    assert t.getFrequency('G2') == pt.approx(98.311, eps)
    assert t.getFrequency('G#2') == pt.approx(103.976, eps)
    assert t.getFrequency('A2') == pt.approx(110.000, eps)
    assert t.getFrequency('Bb2') == pt.approx(116.929, eps)
    assert t.getFrequency('B2') == pt.approx(123.649, eps)
    assert t.getFrequency('C3') == pt.approx(131.229, eps)
    assert t.getFrequency('C#3') == pt.approx(138.832, eps)
    assert t.getFrequency('D3') == pt.approx(147.066, eps)
    assert t.getFrequency('Eb3') == pt.approx(156.194, eps)
    assert t.getFrequency('E3') == pt.approx(164.766, eps)
    assert t.getFrequency('F3') == pt.approx(175.220, eps)
    assert t.getFrequency('F#3') == pt.approx(185.131, eps)
    assert t.getFrequency('G3') == pt.approx(196.621, eps)
    assert t.getFrequency('G#3') == pt.approx(207.952, eps)
    assert t.getFrequency('A3') == pt.approx(220.000, eps)
    assert t.getFrequency('Bb3') == pt.approx(233.857, eps)
    assert t.getFrequency('B3') == pt.approx(247.299, eps)
    assert t.getFrequency('C4') == pt.approx(262.458, eps)
    assert t.getFrequency('C#4') == pt.approx(277.663, eps)
    assert t.getFrequency('D4') == pt.approx(294.132, eps)
    assert t.getFrequency('Eb4') == pt.approx(312.388, eps)
    assert t.getFrequency('E4') == pt.approx(329.532, eps)
    assert t.getFrequency('F4') == pt.approx(350.441, eps)
    assert t.getFrequency('F#4') == pt.approx(370.262, eps)
    assert t.getFrequency('G4') == pt.approx(393.243, eps)
    assert t.getFrequency('G#4') == pt.approx(415.905, eps)
    assert t.getFrequency('A4') == pt.approx(440.000, eps)
    assert t.getFrequency('Bb4') == pt.approx(467.715, eps)
    assert t.getFrequency('B4') == pt.approx(494.597, eps)
    assert t.getFrequency('C5') == pt.approx(524.916, eps)
    assert t.getFrequency('C#5') == pt.approx(555.327, eps)
    assert t.getFrequency('D5') == pt.approx(588.263, eps)
    assert t.getFrequency('Eb5') == pt.approx(624.775, eps)
    assert t.getFrequency('E5') == pt.approx(659.065, eps)
    assert t.getFrequency('F5') == pt.approx(700.881, eps)
    assert t.getFrequency('F#5') == pt.approx(740.523, eps)
    assert t.getFrequency('G5') == pt.approx(786.486, eps)
    assert t.getFrequency('G#5') == pt.approx(831.810, eps)
    assert t.getFrequency('A5') == pt.approx(880.000, eps)
    assert t.getFrequency('Bb5') == pt.approx(935.429, eps)
    assert t.getFrequency('B5') == pt.approx(989.194, eps)

